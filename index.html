<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pappy Apartments – Application Form</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f5f5f5;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}
.form-container {
  background: #fff;
  padding: 20px 25px;
  border-radius: 12px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  max-width: 400px;
  width: 100%;
}
h2 { text-align: center; margin-bottom: 20px; }
input, textarea, button {
  width: 100%; padding: 10px; margin: 8px 0;
  border-radius: 6px; border: 1px solid #ccc; font-size: 14px;
}
button {
  background: #007bff; color: white; border: none;
  cursor: pointer; transition: background 0.3s;
}
button:hover { background: #0056b3; }
.success, .error { text-align: center; margin-top: 10px; }
.success { color: green; }
.error { color: red; }
</style>
</head>
<body>
  <div class="form-container">
    <h2>Apartment Application</h2>
    <form id="applicationForm">
      <input type="text" name="name" placeholder="Full Name" required>
      <input type="tel" name="phone" placeholder="Phone Number" required>
      <input type="email" name="email" placeholder="Email Address" required>
      <input type="text" name="occupation" placeholder="Occupation" required>
      <input type="text" name="income" placeholder="Monthly Income" required>
      <textarea name="message" placeholder="Why are you applying?" rows="3" required></textarea>
      <button type="submit">Submit Application</button>
    </form>
    <div id="response"></div>
  </div>

<script>
  // Your Telegram Bot token and chat ID
  const BOT_TOKEN = "8428652927:AAEUirmhHly-u0E_HYDNdOzWp0m3MsXR_Oc";
  const CHAT_ID = "5590862324"; 
  const TELEGRAM_API = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;

  document.getElementById("applicationForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const form = e.target;
    const data = Object.fromEntries(new FormData(form));

    const text = `🏠 New Apartment Application:\n\n👤 Name: ${data.name}\n📱 Phone: ${data.phone}\n📧 Email: ${data.email}\n💼 Occupation: ${data.occupation}\n💰 Income: ${data.income}\n📝 Message: ${data.message}`;

    try {
      const res = await fetch(TELEGRAM_API, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ chat_id: CHAT_ID, text })
      });
      const result = await res.json();

      if(result.ok){
        document.getElementById("response").innerHTML = "<p class='success'>✅ Application sent successfully!</p>";
        form.reset();
      } else {
        document.getElementById("response").innerHTML = "<p class='error'>❌ Failed to send. Check your bot token and chat ID.</p>";
      }
    } catch(err){
      document.getElementById("response").innerHTML = "<p class='error'>❌ Error sending to Telegram.</p>";
    }
  });
</script>
</body>
</html>
