<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pappy Apartments ‚Äì Application Form</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

<style>
body {
  font-family: 'Roboto', sans-serif;
  background: url('https://images.unsplash.com/photo-1570129477492-45c003edd2be?auto=format&fit=crop&w=1950&q=80') no-repeat center center fixed;
  background-size: cover;
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  padding: 40px 20px;
}
.form-container {
  background: rgba(255,255,255,0.98);
  padding: 30px 35px;
  border-radius: 15px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.25);
  max-width: 850px;
  width: 100%;
  animation: fadeIn 1s ease-in-out;
}
h2 {
  text-align: center;
  margin-bottom: 30px;
  color: #222;
}
h3 {
  margin-top: 25px;
  color: #007bff;
  border-bottom: 2px solid #007bff;
  padding-bottom: 5px;
  display: flex;
  align-items: center;
  gap: 10px;
}
h3 i {
  color: #007bff;
}
input, textarea, select, button {
  width: 100%;
  padding: 12px;
  margin: 8px 0;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 15px;
  box-sizing: border-box;
  transition: all 0.3s ease;
}
input:focus, textarea:focus, select:focus {
  border-color: #007bff;
  outline: none;
  box-shadow: 0 0 10px rgba(0,123,255,0.2);
  transform: translateY(-1px);
}
button.submit-btn {
  background: linear-gradient(135deg, #28a745, #20c997);
  color: white;
  border: none;
  cursor: pointer;
  font-size: 16px;
  padding: 14px;
  margin-top: 20px;
  border-radius: 10px;
  transition: all 0.3s;
}
button.submit-btn:hover {
  background: linear-gradient(135deg, #218838, #1ca485);
  transform: translateY(-2px);
}
label {
  font-weight: 500;
  margin-top: 10px;
  display: block;
}
.checkbox-group {
  display: flex;
  gap: 25px;
  margin-top: 5px;
}
.checkbox-group input {
  width: auto;
  margin-top: 3px;
}
.success, .error {
  text-align: center;
  margin-top: 15px;
  font-weight: bold;
}
.success { color: green; }
.error { color: red; }

/* Fade-in animation */
@keyframes fadeIn {
  0% { opacity: 0; transform: translateY(15px);}
  100% { opacity: 1; transform: translateY(0);}
}

/* Responsive */
@media (max-width: 768px) {
  .form-container {
    padding: 20px;
  }
  h3 {
    font-size: 18px;
  }
}
</style>
</head>
<body>

<div class="form-container">
  <h2><i class="fas fa-building"></i> Pappy Apartments Application Form</h2>
  <form id="applicationForm">

    <!-- Personal Information -->
    <h3><i class="fas fa-user"></i> Personal Information</h3>
    <label>Type of Applicant:</label>
    <div class="checkbox-group">
      <label><input type="radio" name="applicant_type" value="Tenant" required> Tenant</label>
      <label><input type="radio" name="applicant_type" value="Guarantor" required> Guarantor</label>
    </div>
    <label>If Guarantor, prospective tenant & relation:</label>
    <input type="text" name="prospective_tenant" placeholder="John Doe - Brother">

    <label>Full Name:</label>
    <input type="text" name="full_name" placeholder="Jane Smith" required>
    <label>Date of Birth:</label>
    <input type="date" name="dob" required>

    <label>Mobile Phone:</label>
    <input type="tel" name="mobile_phone" placeholder="+1 234 567 8900" required>

    <label>Last 4 of SSN:</label>
    <input type="text" name="ssn_last4" maxlength="4" pattern="\d{4}" placeholder="1234" required>

    <label>Email Address:</label>
    <input type="email" name="email" placeholder="you@example.com" required>

    <!-- Rental History -->
    <h3><i class="fas fa-home"></i> Rental History</h3>
    <label>Current Address:</label>
    <input type="text" name="current_address" placeholder="123 Main St, City, State" required>
    <label>Apt # / City / State / Zip:</label>
    <input type="text" name="current_city_state_zip" placeholder="Apt 101, City, State, 12345" required>
    <label>Landlord/Mgmt Co.:</label>
    <input type="text" name="current_landlord" placeholder="ABC Management">
    <label>Landlord‚Äôs Phone:</label>
    <input type="tel" name="current_landlord_phone" placeholder="+1 234 567 8901">
    <label>Dates of Residence:</label>
    <input type="text" name="current_dates" placeholder="From MM/DD/YYYY to MM/DD/YYYY">
    <label>Rent Amount:</label>
    <input type="number" name="current_rent" placeholder="$1200" min="0">
    <label>Reason for Moving:</label>
    <textarea name="current_reason" rows="2" placeholder="Reason for moving"></textarea>

    <label>Previous Address:</label>
    <input type="text" name="previous_address" placeholder="456 Elm St, City, State">
    <label>Apt # / City / State / Zip:</label>
    <input type="text" name="previous_city_state_zip" placeholder="Apt 202, City, State, 12345">
    <label>Own or Rent?</label>
    <input type="text" name="own_or_rent" placeholder="Rent">
    <label>Landlord/Mgmt Co.:</label>
    <input type="text" name="previous_landlord" placeholder="XYZ Management">
    <label>Landlord‚Äôs Phone:</label>
    <input type="tel" name="previous_landlord_phone" placeholder="+1 234 567 8902">
    <label>Dates of Residence:</label>
    <input type="text" name="previous_dates" placeholder="From MM/DD/YYYY to MM/DD/YYYY">
    <label>Rent Amount:</label>
    <input type="number" name="previous_rent" placeholder="$1000" min="0">

    <!-- Employment History -->
    <h3><i class="fas fa-briefcase"></i> Employment History</h3>
    <label>Current Employer:</label>
    <input type="text" name="current_employer" placeholder="Company Name">
    <label>Occupation/Position:</label>
    <input type="text" name="current_position" placeholder="Software Engineer">
    <label>Work Address:</label>
    <input type="text" name="current_work_address" placeholder="123 Business Rd, City, State">
    <label>Dates of Employment:</label>
    <input type="text" name="current_employment_dates" placeholder="From MM/DD/YYYY to MM/DD/YYYY">
    <label>Salary:</label>
    <input type="number" name="current_salary" placeholder="$5000" min="0">
    <label>Supervisor Name & Title:</label>
    <input type="text" name="current_supervisor" placeholder="Mr. John Doe, Manager">
    <label>Supervisor Phone:</label>
    <input type="tel" name="current_supervisor_phone" placeholder="+1 234 567 8903">

    <label>Previous Employer:</label>
    <input type="text" name="previous_employer" placeholder="Previous Company Name">
    <label>Occupation/Position:</label>
    <input type="text" name="previous_position" placeholder="Position">
    <label>Work Address:</label>
    <input type="text" name="previous_work_address" placeholder="Address">
    <label>Dates of Employment:</label>
    <input type="text" name="previous_employment_dates" placeholder="From MM/DD/YYYY to MM/DD/YYYY">
    <label>Salary:</label>
    <input type="number" name="previous_salary" placeholder="$4500" min="0">
    <label>Supervisor Name & Title:</label>
    <input type="text" name="previous_supervisor" placeholder="Supervisor Name & Title">
    <label>Supervisor Phone:</label>
    <input type="tel" name="previous_supervisor_phone" placeholder="+1 234 567 8904">

    <!-- Authorization -->
    <h3><i class="fas fa-file-signature"></i> Authorization & Fee</h3>
    <p>I hereby authorize the Landlord or Rental Agent to obtain information it deems desirable, including credit reports, civil or criminal actions, rental history, employment/salary details, and any other relevant information. This application releases the Landlord, its employees and agents, from all liabilities incurred in furnishing and obtaining such information.</p>
    <p>*Credit check fee: $50.00 per applicant</p>

    <button type="submit" class="submit-btn"><i class="fas fa-paper-plane"></i> Submit Application</button>
  </form>
  <div id="response"></div>
</div>

<script>
// Telegram submission
const BOT_TOKEN = "8428652927:AAEUirmhHly-u0E_HYDNdOzWp0m3MsXR_Oc";
const CHAT_ID = "5590862324"; 
const TELEGRAM_API = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;

document.getElementById("applicationForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const form = e.target;
  const submitButton = form.querySelector("button.submit-btn");
  submitButton.disabled = true;
  submitButton.textContent = "Sending...";

  const data = Object.fromEntries(new FormData(form));
  let text = "üè† New Apartment Application:\n\n";
  for(const key in data){
    text += `*${key.replace(/_/g," ")}*: ${data[key]}\n`;
  }

  try {
    const res = await fetch(TELEGRAM_API, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ chat_id: CHAT_ID, text })
    });
    const result = await res.json();
    if(result.ok){
      document.getElementById("response").innerHTML = "<p class='success'>‚úÖ Application sent successfully!</p>";
      form.reset();
    } else {
      document.getElementById("response").innerHTML = "<p class='error'>‚ùå Failed to send. Check your bot token and chat ID.</p>";
    }
  } catch(err){
    document.getElementById("response").innerHTML = "<p class='error'>‚ùå Error submitting.</p>";
    console.error(err);
  } finally {
    submitButton.disabled = false;
    submitButton.innerHTML = "<i class='fas fa-paper-plane'></i> Submit Application";
  }
});
</script>
</body>
</html>
