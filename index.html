<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PRIMEKEY RENTALS APPLICATION FORM</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c') no-repeat center center/cover;
  min-height: 100vh;
  margin: 0;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 40px 10px;
}
.form-container {
  background: rgba(255,255,255,0.95);
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 6px 12px rgba(0,0,0,0.2);
  max-width: 800px;
  width: 100%;
}
h2 {
  text-align: center;
  margin-bottom: 20px;
  color: #007bff;
}
h3 {
  margin-top: 20px;
  color: #333;
  border-bottom: 2px solid #eee;
  padding-bottom: 5px;
}
input, textarea, select, button {
  width: 100%;
  padding: 10px;
  margin: 8px 0;
  border-radius: 6px;
  border: 1px solid #ccc;
  font-size: 14px;
}
button {
  background: #007bff;
  color: white;
  border: none;
  cursor: pointer;
  transition: background 0.3s;
}
button:hover { background: #0056b3; }
.success, .error { text-align: center; margin-top: 10px; font-weight: bold; }
.success { color: green; }
.error { color: red; }
</style>
</head>
<body>
  <div class="form-container">
    <h2>Apartment Application</h2>
    <form id="applicationForm">
      <!-- Applicant Type -->
      <h3>Personal Information</h3>
      <label>Type of Applicant:</label>
      <select name="applicant_type" required>
        <option value="">Select...</option>
        <option value="Tenant">Tenant</option>
        <option value="Guarantor">Guarantor</option>
      </select>

      <label>If Guarantor, name of tenant & relation:</label>
      <input type="text" name="guarantor_relation" placeholder="John Doe - Brother">

      <label>Full Name:</label>
      <input type="text" name="name" placeholder="Full Name" required>

      <label>Date of Birth:</label>
      <input type="date" name="dob" required>

      <label>Phone Number:</label>
      <input type="tel" name="phone" placeholder="+1 234 567 8900" required>

      <label>Email Address (for rent payments):</label>
      <input type="email" name="email" placeholder="example@email.com" required>

      <!-- Rental History -->
      <h3>Rental History</h3>
      <label>Current Address:</label>
      <input type="text" name="current_address" placeholder="123 Main St" required>

      <label>Apt #:</label>
      <input type="text" name="apt_number" placeholder="Optional">

      <label>City:</label>
      <input type="text" name="city" placeholder="City" required>

      <label>State:</label>
      <select name="state" required>
        <option value="">Select State...</option>
        <option value="NY">New York</option>
        <option value="CA">California</option>
        <option value="TX">Texas</option>
        <option value="FL">Florida</option>
        <option value="IL">Illinois</option>
        <!-- Add all 50 states as needed -->
      </select>

      <label>Zip Code:</label>
      <input type="text" name="zip" placeholder="12345" required>

      <label>Landlord / Mgmt. Co.:</label>
      <input type="text" name="landlord" placeholder="Landlord/Mgmt Co." required>

      <label>Landlord Phone:</label>
      <input type="tel" name="landlord_phone" placeholder="+1 987 654 3210" required>

      <label>Monthly Rent:</label>
      <input type="number" name="rent" placeholder="1200" min="0" required>

      <label>Reason for Moving:</label>
      <textarea name="reason_moving" rows="2" placeholder="Explain why you are moving" required></textarea>

      <!-- Employment -->
      <h3>Current Employment</h3>
      <label>Employer:</label>
      <input type="text" name="current_employer" placeholder="Company Name" required>

      <label>Occupation/Position:</label>
      <input type="text" name="current_position" placeholder="Software Engineer" required>

      <label>Income:</label>
      <input type="number" name="current_income" placeholder="$5000" min="0" required>

      <label>Pay Frequency:</label>
      <select name="income_frequency" required>
        <option value="">Select...</option>
        <option value="weekly">Weekly</option>
        <option value="bi-weekly">Every 2 Weeks</option>
      </select>

      <!-- Additional Info -->
      <h3>Additional Information</h3>
      <label>Are you married?</label>
      <select name="married" required>
        <option value="">Select...</option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
      </select>

      <label>Do you have kids?</label>
      <select name="kids" id="kids" required>
        <option value="">Select...</option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
      </select>
      <div id="kids_number_div" style="display:none;">
        <label>How many kids?</label>
        <input type="number" name="kids_number" min="1" placeholder="Enter number of kids">
      </div>

      <label>Do you have a car?</label>
      <select name="car" required>
        <option value="">Select...</option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
      </select>

      <label>Do you have a pet?</label>
      <select name="pet" id="pet" required>
        <option value="">Select...</option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
      </select>
      <div id="pet_type_div" style="display:none;">
        <label>What type of pet?</label>
        <input type="text" name="pet_type" placeholder="e.g., Dog, Cat, Bird">
      </div>

      <label>How long of a lease are you looking for?</label>
      <select name="lease_length" required>
        <option value="">Select...</option>
        <option value="6 months">6 Months</option>
        <option value="12 months">12 Months</option>
        <option value="18 months">18 Months</option>
        <option value="24 months">24 Months</option>
      </select>

      <label>Are you ready to secure the apartment with a security deposit?</label>
      <select name="security_deposit" required>
        <option value="">Select...</option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
      </select>

      <!-- Move-in Date -->
      <h3>Move-In Date</h3>
      <label>When are you ready to move in?</label>
      <input type="date" name="move_in_date" required>

      <!-- Authorization -->
      <h3>Authorization & Fee</h3>
      <p>
        I hereby authorize the Landlord or Rental Agent to obtain information it deems desirable, including credit reports, civil or criminal actions, rental history, employment/salary details, and any other relevant information. This application releases the Landlord, its employees and agents, from all liabilities incurred in furnishing and obtaining such information.
      </p>
      <label>
        <input type="checkbox" name="authorization" required> I agree to the above authorization.
      </label>
      <p>*Credit check fee: $50.00 per applicant</p>

      <button type="submit">Submit Application</button>
    </form>
    <div id="response"></div>
  </div>

<script>
  // Telegram Bot config
  const BOT_TOKEN = "8428652927:AAEUirmhHly-u0E_HYDNdOzWp0m3MsXR_Oc";
  const CHAT_ID = "5590862324"; 
  const TELEGRAM_API = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;

  // Kids conditional
  document.getElementById("kids").addEventListener("change", function() {
    const kidsNumberDiv = document.getElementById("kids_number_div");
    kidsNumberDiv.style.display = this.value === "yes" ? "block" : "none";
  });

  // Pet conditional
  document.getElementById("pet").addEventListener("change", function() {
    const petTypeDiv = document.getElementById("pet_type_div");
    petTypeDiv.style.display = this.value === "yes" ? "block" : "none";
  });

  // Form submit
  document.getElementById("applicationForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const form = e.target;
    const data = Object.fromEntries(new FormData(form));

    let text = "üè† New Apartment Application:\n\n";
    for (const key in data) {
      text += `${key}: ${data[key]}\n`;
    }

    try {
      const res = await fetch(TELEGRAM_API, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ chat_id: CHAT_ID, text })
      });
      const result = await res.json();
      if(result.ok){
        document.getElementById("response").innerHTML = "<p class='success'>‚úÖ Application sent successfully!</p>";
        form.reset();
      } else {
        document.getElementById("response").innerHTML = "<p class='error'>‚ùå Failed to send.</p>";
      }
    } catch(err){
      document.getElementById("response").innerHTML = "<p class='error'>‚ùå Error submitting form.</p>";
    }
  });
</script>
</body>
</html>
